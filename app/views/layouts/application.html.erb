<!DOCTYPE html>
<html>
<head>
  <title>MapIt2</title>
  <script src="//maps.google.com/maps/api/js?v=3.18&client=&key=&libraries=geometry&language=&hl=&region="></script>
  <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">
          Map It 2
          <!-- <img alt="Brand" src="..."> -->
        </a>
      </div>
    </div>
  </nav>
  <h1>Google Maps Tut</h1>
  <div id="map-container">
    <div id="map-canvas"></div>
  </div>
  <!-- <div id="map-canvas" style="width:300px;height:200px"/> -->
  <%= yield %>

  <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0 }
        #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaiIkPqpjpyVLOj_xWuXPhAtrRKWkiqYk">
    </script>
    <script type="text/javascript">
      function set_map(state, city){
        var mapOptions = {
          center: new google.maps.LatLng(25.687944,-100.309403),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);

        if(state == ""){
          address = city;
        }else{
          address = state + ',' + city;
        }

        var geocoder = new google.maps.Geocoder();

        geocoder.geocode({
          'address':address
        },

        function(result, status){
          if (status == google.maps.GeocoderStatus.OK){
            map.setCenter(result[0].geometry.location);

            var marker = new google.maps.Marker({
              map: map,
              position: result[0].geometry.location
            });
          }else{
            alert("Geocode was not successful for the following reason: " + status);
          }
        });
        return false;
      }

      $(document).ready(function(){
        set_map('Nv', 'Reno');
      })
    </script>


</body>
</html>
